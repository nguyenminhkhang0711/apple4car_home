<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <title>About</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="About.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer="">
  </script>
  <meta name="generator" content="Nicepage 5.19.3, nicepage.com">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
  <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "",
            "logo": "https://pixabay.com/get/g912608e8e6096e020b5a5259bd4fe20362236b88308a480095ee267ba384b80c913b0d64fad0f1065723c644494f4378371fb102902cc74ede49c77e2470416f_1280.png"
        }
    </script>
  <meta name="theme-color" content="#478ac9">
  <meta property="og:title" content="About">
  <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>

<body data-path-to-root="./" class="u-body u-xl-mode" data-lang="en">
  <header class="u-clearfix u-header u-header" id="sec-5344">
    <div class="u-clearfix u-sheet u-sheet-1">
      <a href="" class="u-align-left u-image u-logo u-image-1" data-image-width="1280" data-image-height="1280">
        <img src="./images/logo-xe.png" class="u-logo-image u-logo-image-1">
      </a>
      <h3 class="u-text u-text-black u-text-1">APPL<span style="font-weight: 700;"></span>ER4CAR
      </h3>
      <nav class="u-align-right u-menu u-menu-one-level u-offcanvas u-menu-1" data-position="">
        <div class="menu-collapse"
          style="font-size: 1rem; letter-spacing: 0px; font-weight: 700; text-transform: uppercase;">
          <a class="u-button-style u-custom-active-border-color u-custom-active-color u-custom-border u-custom-border-color u-custom-border-radius u-custom-borders u-custom-color u-custom-hover-border-color u-custom-hover-color u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-text-active-color u-custom-text-color u-custom-text-decoration u-custom-text-hover-color u-custom-text-shadow u-custom-text-shadow-blur u-custom-text-shadow-color u-custom-text-shadow-transparency u-custom-text-shadow-x u-custom-text-shadow-y u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
            href="#">
            <svg class="u-svg-link" viewBox="0 0 24 24">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px"
              xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect y="1" width="16" height="2"></rect>
                <rect y="7" width="16" height="2"></rect>
                <rect y="13" width="16" height="2"></rect>
              </g>
            </svg>
          </a>
        </div>
        <div class="u-custom-menu u-nav-container">
          <ul class="u-nav u-spacing-30 u-unstyled u-nav-1">
            <li class="u-nav-item"><a
                class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90"
                href="Home.html" style="padding: 10px 0px;">Home</a>
            </li>
            <li class="u-nav-item"><a
                class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90"
                href="About.html" style="padding: 10px 0px;">About</a>
            </li>
            <li class="u-nav-item"><a
                class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90"
                href="ConTact.html" style="padding: 10px 0px;">Contact</a>
            </li>
            <li class="u-nav-item"><a
                class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90"
                href="price-list.html" style="padding: 10px 0px;">price list</a>
            </li>
            <li class="u-nav-item"><a
                class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90"
                href="Sign-Up.html" style="padding: 10px 0px;">Sign Up</a>
            </li>
          </ul>
        </div>
        <div class="u-custom-menu u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-inner-container-layout u-sidenav-overflow">
              <div class="u-menu-close"></div>
              <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2">
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html">Home</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html">About</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="ConTact.html">Contact</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="price-list.html">price
                    list</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Sign-Up.html">Sign
                    Up</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>
      </nav>
    </div>
  </header>
  <script>
    // Hàm để lấy giá trị từ cookie bằng tên
function getCookieValue(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop().split(';').shift();
}

// Lấy mã phiên từ cookie
const sessionID = getCookieValue("ss");

if (sessionID) {
  // Chuẩn bị dữ liệu cho yêu cầu API
  const data = {
    sessionID: sessionID
  };

  // Gửi yêu cầu POST đến API để xác minh phiên đăng nhập
  fetch("https://apple4car.onrender.com/sessionID", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(data)
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      // Phiên đăng nhập hợp lệ, bạn có thể thực hiện yêu cầu API khác ở đây.
      console.log("Phiên đăng nhập hợp lệ.");
    } else {
      // Phiên đăng nhập không hợp lệ, bạn có thể đòi hỏi đăng nhập lại hoặc xử lý tùy ý.
      console.log("Phiên đăng nhập không hợp lệ.");
    }
  })
  .catch(error => {
    console.error("Lỗi khi gửi yêu cầu đến API: " + error);
  });
} else {
  // Nếu không có mã phiên trong cookie, đòi hỏi đăng nhập
  alert("Bạn cần đăng nhập để thực hiện thao tác này.");
}

  </script>
  

 <!-- Sự kiện thêm bài đăng -->
 <div id="about-welcome-message"></div>
 <script>
  // Hàm để lấy tên tài khoản từ localStorage (hoặc cách lưu trữ dữ liệu khác)
  const loggedInUser = localStorage.getItem('loggedInUser');

  // Tạo một phần tử để hiển thị tên tài khoản
  const aboutWelcomeMessage = document.getElementById('about-welcome-message');

  // Kiểm tra xem phần tử "about-welcome-message" đã tồn tại trước khi cố gắng thay đổi nội dung
  if (aboutWelcomeMessage) {
    aboutWelcomeMessage.textContent = `Xin chào, ${loggedInUser}!`;
  } else {
    console.error("Không tìm thấy phần tử 'about-welcome-message' trên trang.");
  }
</script>
 <div id="add-post-form-container">
  <h1>Thêm bài đăng mới</h1>
  <button id="show-add-form-button">Thêm bài đăng</button>

  <form id="add-post-form" style="display: none;">
    <label for="TenBaiDang">Tên bài đăng:</label>
    <input type="text" id="TenBaiDang" name="TenBaiDang" required>
    <br>

    <label for="NoiDung">Nội dung:</label>
    <textarea id="NoiDung" name="NoiDung"></textarea>
    <br>

    <label for="HinhAnh">Hình ảnh:</label>
    <input type="text" id="HinhAnh" name="HinhAnh">
    <br>

    <label for="BienSo">Biển số:</label>
    <input type="text" id="BienSo" name="BienSo">
    <br>

    <label for="GiaThue">Giá thuê:</label>
    <input type="number" id="GiaThue" name="GiaThue">
    <br>

    <label for="DiaDiemCoXe">Địa điểm có xe:</label>
    <input type="text" id="DiaDiemCoXe" name="DiaDiemCoXe">
    <br>

    <label for="HoTen">Họ và tên:</label>
    <input type="text" id="HoTen" name="HoTen" required>
    <br>

    <button type="submit">Xác nhận</button>
    <button id="cancel-button" type="button">Hủy</button>
  </form>
</div>

<script>
  // Hàm để lấy giá trị từ cookie bằng tên
  function getCookieValue(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(';').shift();
  }

  // Lắng nghe sự kiện click vào nút "Thêm bài đăng"
  const showAddFormButton = document.getElementById('show-add-form-button');
  const addPostForm = document.getElementById('add-post-form');

  showAddFormButton.addEventListener('click', () => {
    addPostForm.style.display = 'block';
  });

  // Lắng nghe sự kiện submit của form thêm bài đăng
  addPostForm.addEventListener('submit', (e) => {
    e.preventDefault(); // Ngăn chặn hành động mặc định của form

    // Lấy dữ liệu từ form
    const TenBaiDang = addPostForm.querySelector('#TenBaiDang').value;
    const NoiDung = addPostForm.querySelector('#NoiDung').value;
    const HinhAnh = addPostForm.querySelector('#HinhAnh').value;
    const BienSo = addPostForm.querySelector('#BienSo').value;
    const GiaThue = addPostForm.querySelector('#GiaThue').value;
    const DiaDiemCoXe = addPostForm.querySelector('#DiaDiemCoXe').value;
    const HoTen = addPostForm.querySelector('#HoTen').value;

    const sessionID = getCookieValue("ss");

    if (!sessionID) {
      alert("Bạn cần đăng nhập để thực hiện thao tác này.");
      return;
    }

    // Chuẩn bị dữ liệu cho yêu cầu API
    const addData = {
      sessionID: sessionID,
      TenBaiDang: TenBaiDang,
      NoiDung: NoiDung,
      HinhAnh: HinhAnh,
      BienSo: BienSo,
      GiaThue: GiaThue,
      DiaDiemCoXe: DiaDiemCoXe,
      HoTen: HoTen,
    };

    // Gửi yêu cầu POST đến API để thêm bài đăng
    fetch("https://apple4car.onrender.com/dangbai", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Cookie": `ss=${sessionID}`
      },
      body: JSON.stringify(addData)
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        // Bài đăng đã được thêm thành công
        alert("Bài đăng đã được thêm thành công.");
        addPostForm.style.display = 'none';
      } else {
        console.log("Lỗi khi thêm bài đăng: " + data.message);
      }
    })
    .catch(error => {
      console.error("Lỗi khi gửi yêu cầu đến API: " + error);
    });
  });
</script>

 <h1>Danh sách các bài viết</h1>

 <!-- Phần tử để hiển thị dữ liệu từ API -->
 <div id="table-container"></div>

 <script>
   // Đoạn mã JavaScript để lấy dữ liệu từ API và hiển thị nó
   const tableContainer = document.getElementById("table-container");

   fetch('https://apple4car.onrender.com/posts')
     .then(response => response.json())
     .then(data => {
       // Xử lý dữ liệu từ API (danh sách bài viết)
       const posts = data;

       if (tableContainer) {
         // Tạo một bảng HTML để hiển thị dữ liệu
         const table = document.createElement("table");

         // Tạo hàng tiêu đề
         const headerRow = document.createElement("tr");
         const headers = ["NoiDung", "HinhAnh", "BienSo", "GiaThue", "DiaDiemCoXe", "HoTen"];

         headers.forEach(headerText => {
           const headerCell = document.createElement("th");
           headerCell.textContent = headerText;
           headerRow.appendChild(headerCell);
         });

         table.appendChild(headerRow);

         // Thêm nội dung từ API
         posts.forEach(post => {
           const rowData = [
             post.NoiDung,
             post.HinhAnh,
             post.BienSo,
             post.GiaThue,
             post.DiaDiemCoXe,
             post.HoTen
           ];

           const row = document.createElement("tr");
           rowData.forEach(cellData => {
             const cell = document.createElement("td");
             cell.textContent = cellData;
             row.appendChild(cell);
           });

           table.appendChild(row);
         });

         // Hiển thị bảng trong phần tử "table-container"
         tableContainer.appendChild(table);
       } else {
         console.error("Không tìm thấy phần tử 'table-container' trên trang.");
       }
     })
     .catch(error => {
       console.error('Lỗi:', error);
     });
 </script>
   
  <script src="cookie.js"></script>
  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-47a3">
    <div class="u-clearfix u-sheet u-sheet-1">
      <p class="u-align-center u-small-text u-text u-text-variant u-text-1">© Copyright APPLE4CAR - 2023 -
        CNTT LHU</p>
    </div>
  </footer>

</body>

</html>